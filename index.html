<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Node Keyboard Socket</title>
    <link rel="shortcut icon" href="https://nodejs.org/static/images/logo.svg" type="image/x-icon">
</head>
<body>
    <style>
        body {
            font-family: Arial, Helvetica, sans-serif;
        }
        form {
            display: inline;
        }
        #volume_value {
            text-align: center;
            width: 2.5%;
        }
    </style>
    <center>
        <button id="prev" data-action="prev">
            <span class="iconify-inline" data-icon="bx:bxs-skip-previous-circle" data-width="64" data-height="64"></span>
        </button>
        <button id="playpause" data-action="playpause">
            <span class="iconify-inline" data-icon="ant-design:play-circle-filled" data-width="64" data-height="64"></span>
            <span class="iconify-inline" data-icon="ant-design:pause-circle-filled" data-width="64" data-height="64"></span>
        </button>
        <button id="next" data-action="next">
            <span class="iconify-inline" data-icon="bx:bxs-skip-next-circle" data-width="64" data-height="64"></span>
        </button>
        <br>
        <input id="volume" type="range" min="0" max="100" step="5">
        <br>
        <input type="text" name="" id="volume_value" readonly>
        <span>Volume</span>
    </center>
</body>
    <script src="https://code.iconify.design/2/2.1.0/iconify.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        let socket = io();

        socket.on('volume state', (volume_state) => {
            $('#volume').val(volume_state);
        })

        let buttons = document.getElementsByTagName('button');
        for (let i = 0; i < buttons.length; i++) {
            let button = buttons[i];
            
            button.addEventListener('click', (event) => {
                socket.emit('action', button.dataset.action);
            });
        }

        let sliders = document.getElementsByTagName('input');
        for (let i = 0; i < sliders.length; i++) {
            let slider = sliders[i];

            slider.addEventListener('change', (slide) => {
                socket.emit('volume', slider.value);
                $('#volume_value').val(slider.value);
            })
        }      
    </script>
</html>