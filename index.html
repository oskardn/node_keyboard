<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Node Keyboard Socket</title>
    <link rel="shortcut icon" href="https://nodejs.org/static/images/logo.svg" type="image/x-icon">
</head>
<body>
    <style>
        body {
            font-family: Arial, Helvetica, sans-serif;
        }
        form {
            display: inline;
        }
        #volume_value {
            text-align: center;
            width: 2.5%;
        }
    </style>
    <center>
        <button id="prev" data-action="prev">
            <i class="fas fa-backward fa-5x"></i>
        </button>
        <button id="playpause" data-action="playpause">
            <i class="fas fa-pause fa-5x"></i>
            <i class="fas fa-play fa-5x"></i>
        </button>
        <button id="next" data-action="next">
            <i class="fas fa-forward fa-5x"></i>
        </button>
        <br>
        <input id="volume" type="range" min="0" max="100" step="1">
        <br>
        <input type="text" name="" id="volume_value" readonly>
        <span>Volume</span>
    </center>
</body>
    <script src="https://kit.fontawesome.com/6756ad2bc3.js" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        let socket = io();
        let token;

        socket.emit('token', token);

        socket.on('auth', () => {
            window.location.href = '/auth'
        })

        socket.on('volume change', (volchange) => {
            $('#volume_value').val(volchange);
            $('#volume').val(volchange);
        });

        let buttons = $('button');
        for (let i = 0; i < buttons.length; i++) {
            let button = buttons[i];
            
            button.addEventListener('click', (event) => {
                socket.emit('action', 
                {
                    "action": button.dataset.action,
                    "token": token
                });
            });
        };

        let sliders = $('input');
        for (let i = 0; i < sliders.length; i++) {
            let slider = sliders[i];

            slider.addEventListener('change', (slide) => {
                socket.emit('volume',
                {
                    "volume": slider.value,
                    "token": token
                });
                $('#volume_value').val(parseInt(slider.value));
            });
        };
    </script>
</html>